# ุจูุช ุงูุฃุฑูุงู ุงููุฌุงููุฉ ุงูุงุญุชุฑุงูู (nxrxbot-pro)

ูุฐุง ุงููุดุฑูุน ูู ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ ูุจูุช Telegram ูุชูุฏู ูุฅุฏุงุฑุฉ ูุธุงู ุฃุฑูุงู ูุฌุงููุฉุ ูุน ููุฒุงุช ูุชูุงููุฉ ุชุดูู ูุธุงู PROุ ูุธุงู ุงูููุงุทุ ูุธุงู ุงูุฅุนูุงูุงุชุ ูููุญุฉ ุชุญูู ูุชุทูุฑุฉ ูููุฏูุฑ. ุชู ุชุทููุฑู ุจุงุณุชุฎุฏุงู **Aiogram 3+** ูุถูุงู ุงูุฃุฏุงุก ุงูุนุงูู ูุงูุนูู ุบูุฑ ุงููุชุฒุงูู.

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

1.  **ูุธุงู PRO ูุชูุงูู:** ุฅุฏุงุฑุฉ ุงุดุชุฑุงูุงุช ุงููุณุชุฎุฏูููุ ุชูุนูู ุจุงูููุงุท ุฃู ุฃููุงุฏุ ูุตูุงุญูุงุช ุฎุงุตุฉ.
2.  **ูุธุงู ููุงุท ุดุงูู:** ูุณุจ ุงูููุงุท (ููุงูุ ุฏุนูุงุชุ ูุดุงูุฏุฉ ุฅุนูุงูุงุช)ุ ุฅููุงู ุงูููุงุท (ุดุฑุงุก PROุ ุฎุฏูุงุช)ุ ูุณุฌู ุชุงุฑูุฎู ุฏููู.
3.  **ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช:** ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐูุ ูุชุชุจุน ุฅุนูุงูุงุช ูุตูุฉ ูุตูุฑูุฉ ูููุฏููุ ูุน ุฏุนู ูุธุงู "ุงููุดุงูุฏุฉ ููุงุจู ุงูููุงุท".
4.  **ุฅุนุฏุงุฏ ุฃููู ุฐูู:** ูุงุฌูุฉ ุฅุนุฏุงุฏ (Setup) ูููุฏูุฑ ุนูุฏ ุงูุชุดุบูู ุงูุฃูู ูุถุจุท ุงูุฅุนุฏุงุฏุงุช ุงูุฃุณุงุณูุฉ ูุงููููุงุช ุงูุฅูุฒุงููุฉ.
5.  **ุฌุงูุฒูุฉ ูููุดุฑ:** ุฏุนู ูุงูู ููู Webhooks ูุงููุดุฑ ุนูู ููุตุงุช ูุซู **Render** ุจุงุณุชุฎุฏุงู Docker ู FastAPI.

## ๐๏ธ ูููู ุงููุดุฑูุน

ุชู ุชูุธูู ุงููุดุฑูุน ููููุง ููุจุงุฏุฆ **Clean Code** ูุณูููุฉ ุงูุตูุงูุฉ ูุงูุชูุณุน:

| ุงููุฌูุฏ/ุงูููู | ุงููุตู |
| :--- | :--- |
| `main.py` | ููุทุฉ ุงูุฏุฎูู ุงูุฑุฆูุณูุฉุ ุฅุนุฏุงุฏ ุงูู Webhooks/Pollingุ ูุชุฌููุน ุงูููููุงุช. |
| `config.py` | ุชุญููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ. |
| `database.py` | ุทุจูุฉ ุงููุตูู ููุจูุงูุงุช (DAL) ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (SQLite/PostgreSQL). |
| `handlers/` | ูุนุงูุฌุงุช ุงูุฃูุงูุฑ ูุงูุฑุณุงุฆู (ูููุณุชุฎุฏู ุงูุนุงุฏู ูุงููุฏูุฑ). |
| `services/` | ุงูููุทู ุงูุชุฌุงุฑู (Business Logic) ููุฃูุธูุฉ ุงูุฑุฆูุณูุฉ (`ProManager`, `PointsManager`, `AdsManager`). |
| `utils/` | ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ (ูุซู Loggingุ ุฏูุงู ุงูุฑุฏ ุงูุขูู). |
| `Dockerfile` | ููู ุจูุงุก ุตูุฑุฉ Docker ูููุดุฑ. |
| `render.yaml` | ููู ุชูููู ุงููุดุฑ ุนูู ููุตุฉ Render. |
| `requirements.txt` | ูุงุฆูุฉ ุจููุชุจุงุช Python ุงููุทููุจุฉ. |
| `.env.example` | ูุซุงู ููุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ. |

## ๐ ุฎุทูุงุช ุงูุชุดุบูู ูุงููุดุฑ

### 1. ุงูุฅุนุฏุงุฏ ุงููุญูู (Polling)

ููุชุดุบูู ุงููุญููุ ููุถู ุงุณุชุฎุฏุงู ูุถุน ุงูู Polling.

1.  **ุงุณุชูุณุงุฎ ุงููุดุฑูุน:**
    ```bash
    git clone <URL_ูููุดุฑูุน>
    cd nxrxbot-pro
    ```
2.  **ุฅุนุฏุงุฏ ุงูุจูุฆุฉ:**
    ```bash
    # ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ
    python3 -m venv venv
    source venv/bin/activate
    
    # ุชุซุจูุช ุงููุชุทูุจุงุช
    pip install -r requirements.txt
    ```
3.  **ุชูููู ุงููุชุบูุฑุงุช:**
    - ุงูุณุฎ ููู `.env.example` ุฅูู ููู `.env`:
      ```bash
      cp .env.example .env
      ```
    - ูู ุจุชุนุฏูู ููู `.env` ูุงููุฃ ูููุฉ `BOT_TOKEN` ู `ADMIN_ID`.
4.  **ุงูุชุดุบูู:**
    ```bash
    python main.py
    ```
    (ุณูุชู ุชุดุบูู ุงูุจูุช ูู ูุถุน Polling ุงูุชุฑุงุถููุง ุฅุฐุง ูู ูุชู ุชุญุฏูุฏ `WEBHOOK_URL`).

### 2. ุงููุดุฑ ุนูู Render (Webhook)

ูููุดุฑ ุนูู Renderุ ูุฌุจ ุงุณุชุฎุฏุงู ุงูู Webhooks ูุถูุงู ุงุณุชูุฑุงุฑูุฉ ุงูุนูู.

1.  **ุฅุนุฏุงุฏ ูุณุชูุฏุน Git:**
    - ุงุฑูุน ุงูููุฏ ุฅูู ูุณุชูุฏุน Git ุฎุงุต ุจู (GitHub/GitLab/Bitbucket).
2.  **ุชูููู Render:**
    - ูู ุจุฅูุดุงุก ุฎุฏูุฉ ููุจ ุฌุฏูุฏุฉ (Web Service) ูู Render.
    - ุงุฑุจุทูุง ุจูุณุชูุฏุน Git ุงูุฎุงุต ุจู.
    - ุงุฎุชุฑ **Docker** ูุจูุฆุฉ ุจูุงุก (Build Environment).
    - ุณูููู Render ุชููุงุฆููุง ุจูุฑุงุกุฉ `Dockerfile` ู `render.yaml`.
3.  **ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**
    - ูู ุฅุนุฏุงุฏุงุช ุงูุฎุฏูุฉ ุนูู Renderุ ูู ุจุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุชุงููุฉ (ูู ููู `.env.example`):
      - `BOT_TOKEN`
      - `ADMIN_ID`
      - `WEBHOOK_SECRET` (ุณูุชู ุชูููุฏู ุชููุงุฆููุง ุฅุฐุง ุงุณุชุฎุฏูุช `render.yaml`)
    - **ููุงุญุธุฉ:** ุณูููู Render ุจุชุนููู ูุชุบูุฑ `WEBHOOK_URL` ุชููุงุฆููุง.
4.  **ุงูุชุดุบูู:**
    - ุนูุฏ ุงููุดุฑุ ุณูููู ุงูุฃูุฑ `uvicorn main:app --host 0.0.0.0 --port $PORT` ุจุชุดุบูู ุงูุจูุชุ ูุณูููู ุงูููุฏ ุจุถุจุท ุงูู Webhook ุชููุงุฆููุง ุนูู ุนููุงู ุงูุฎุฏูุฉ.

### 3. ูุญุต ุงูุตุญุฉ (Health Check)

ููุชุฃูุฏ ูู ุฃู ุงูุฎุฏูุฉ ุชุนูู ุจุดูู ุตุญูุญ ุนูู Renderุ ููููู ุฒูุงุฑุฉ ุงููุณุงุฑ ุงูุชุงูู:

- **ุงููุณุงุฑ:** `/healthz`
- **ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉ:** `{"status": "ok"}`
